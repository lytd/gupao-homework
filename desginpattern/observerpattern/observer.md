# 定义

也叫发布订阅模式，定义对象间一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。

一般有四个角色

- Subject被观察者：定义观察者必须实现的职责，必须能动态的增加、取消观察者，一般是抽象类或者是实现类，管理观察者并通知观察者。
- Observer观察者：接收到消息后，进行更新操作，对接受的信息做处理
- ConcreteSubject具体的被观察者：定义被观察者自己的业务逻辑，同时定义对哪些事件进行通知
- ConcreteObserver具体的观察者：每个观察者在接收到消息后的处理反应是不同，哥哥观察者有自己的处理逻辑。

# 优点

- 观察者与被观察者之间是抽象耦合的
- 建立一套触发机制

# 缺点

需要考虑开发效率与运行效率，当有多个观察者时，运行中，一个观察者卡住，会影响整体的执行效率。

# 注意事项

- 广播链问题 在一个观察者模式中，做多出现一个对象既是观察者又是被观察者，也就是说消息最多转发一次（传递两次）
- 异步处理问题 异步处理需要考虑线程安全与队列的问题。

# 使用范围

- 关联行为场景
- 事件多级触发场景
- 跨系统的消息交换场景，如消息队列的处理机制

# 最佳实践

- 文件系统
- 猫鼠游戏
- ATM取钱
- 广播收音机